%------------------
\section{Enumeration Case Studies\label{sec:ch2:simple}}

In this section, a number of case studies are provided to demonstrate the theoretical aspects of the previous sections\footnote{Ref.~\cite{github-pm-architectures-project} contains \xprog{Matlab} codes that replicate the results from these enumeration case studies and can generate graphs for $(C,R,P)$ architecture design problems.}.

\subsection{Case Study 1\label{sec:ch2:example1}}

\input{../ch2/figures/cpexamples}

\input{../ch2/figures/inter1}

\input{../ch2/figures/model1}

The base three-tuple is specified as:
\begin{align*}
{C} &= \left\lbrace \xcolor{R}, \xcolor{G}, \xcolor{B} \right\rbrace, \qquad {R} = [ 3, 2, 1 ], \qquad {P} = [ 1, 2, 3 ]
\end{align*}

\noindent This example has three different simple component types that have multiple ports and replicates and is visualized in Fig.~\ref{fig:ch2:cpexamples:1}. Then $G^{P}$ is:
\begin{align*}
{V}^{P} &= \left\lbrace  1, 2, 3, 4, 5, 6, 7, 8, 9, 10 \right\rbrace \\
{E}^{P} &= \left\lbrace  (4,5), (6,7), (8,9), (8,10), (9,10) \right\rbrace \\
{L}^{P} &= \left\lbrace \xcolor{R}_1^1, \xcolor{R}_2^1, \xcolor{R}_3^1, \xcolor{G}_1^1, \xcolor{G}_1^2, \xcolor{G}_2^1, \xcolor{G}_2^2, \xcolor{B}_1^1, \xcolor{B}_1^2, \xcolor{B}_1^3 \right\rbrace \\
N_P &= 10, \quad N_C = 6, \quad 3.28 \leq \abs*{\mathcal{G}_3} \leq 945
\end{align*}

\noindent In Fig.~\ref{fig:ch2:inter1} we see $G^{I}$ for two different \mypm{}s. Then in Fig.~\ref{fig:ch2:model1_1} we can see $G^{CP}$ for \mypm{}~1. This can then be mapped to the equivalent $G^{CC}$ shown in Fig.~\ref{fig:ch2:model1_2}. The basic tree search algorithm will have the same tree regardless of the NSCs and this tree is visualized in Fig.~\ref{fig:ch2:tree1simple}. Both graphs in Figs.~\ref{fig:ch2:model1_2} and \ref{fig:ch2:model1_4} will have a topologically equivalent graph appear in the set of graphs generated by this algorithm. Now two different sets of NSCs will be discussed.

\begin{enumerate}[nosep]

\item \label{ch2:example11} No additional NSCs. There are 32,768 adjacency matrices ($\mathcal{G}_0$);  945 \mypm{}s ($\mathcal{G}_1$); 86 candidate graphs with basic tree search algorithm; 77 remaining candidate graphs after initial port-type isomorphism filter; and 77 feasible graphs ($\mathcal{G}_2$). Finally, there are only 16 unique graphs ($\mathcal{G}_3$) consistent with Eqn.~(\ref{eq:ch2:lowerbnd}) and all shown in Fig.~\ref{fig:ch2:unique1}. 258 graph comparisons were needed and only 113 required a full isomorphism check.

\input{../ch2/figures/unique1}

\item \label{ch2:example12} NSCs \ref{ch2:s1}, \ref{ch2:s3} and \ref{ch2:s4} with $M=[0, 0, 1]$, and \ref{ch2:s7} with $P$ as the number of unique edges. Same as \ref{ch2:example11} above until the feasibility checks and here there are only 23 feasible graphs due to the additional NSCs. Finally, there are only 5 unique graphs ($\mathcal{G}_3$) all shown in Fig.~\ref{fig:ch2:unique2}. Note that vertices not connected to $\circled{\xcolor{B}}$ have been removed. 37 graph comparisons were needed and only 19 required a full isomorphism check. If  $M=[1\ 1\ 1]$, then only 2 unique designs are possible.

\input{../ch2/figures/unique2}

\end{enumerate} 

\subsection{Case Study 2\label{sec:ch2:example2}}

This example has five different component types that have multiple ports including multiple 1-port component types and is visualized in Fig.~\ref{fig:ch2:cpexamples:2}. The base three-tuple is specified as:
\begin{gather*}
{C} = \{ \xcolor{P}, \xcolor{R}, \xcolor{G}, \xcolor{B}, \xcolor{O} \}, \quad {R} = [ 1, 2, 2, 1, 1 ], \quad {P} = [ 1, 1, 2, 3, 4 ] \\
N_P = 14, \quad N_C = 7, \quad 58.7 \leq \abs*{\mathcal{G}_3} \leq 135135
\end{gather*}

\begin{enumerate}[nosep]

\input{../ch2/figures/unique3}

\item \label{ch2:example21} No additional NSCs. 2,097,152 adjacency matrices ($\mathcal{G}_0$); 135,135 \mypm{}s ($\mathcal{G}_1$); 1,119 candidate graphs with basic tree search algorithm; 767 remaining candidate graphs after initial port-type isomorphism filter; 767 feasible graphs ($\mathcal{G}_2$); 274 unique graphs\footnote{The 274 graphs are in Fig.~\ref{fig:appB:example2}.}
($\mathcal{G}_3$). 41,036 graph comparisons were needed and only 11,828 required a full isomorphism check.

\item NSCs \ref{ch2:s1}, \ref{ch2:s3} and \ref{ch2:s4} with $M=[1, 0, 0, 0, 0]$.  Same as \ref{ch2:example21} above except there are only 137 unique graphs that contain $\xcolor{P}$ and are connected.

\item \label{ch2:example22} NSCs \ref{ch2:s1}, \ref{ch2:s3} and \ref{ch2:s4} with $M=[1, 1, 1, 1, 1]$, and \ref{ch2:s7} with $P$ as the number of unique edges. Same as \ref{ch2:example21} above until the feasibility checks and here there are only 31 feasible graphs due to the additional NSCs. Finally, there are only 12 unique graphs all shown in Fig.~\ref{fig:ch2:unique3}. 102 graph comparisons were needed and all 102 required a full isomorphism check.

\item Same as \ref{ch2:example22} except with ${C} = \{ \xcolor{P}, \xcolor{R}, \xcolor{G}, \xcolor{G}, \xcolor{B}, \xcolor{O} \}$ modified, $M=[1, 1, 1, 0, 1, 1]$, and appropriate changes to $P$ and $R$. Therefore requiring at least one $\xcolor{G}$ to be present but otherwise the same. Now there are 34 feasible graphs and 14 are unique (more than \ref{ch2:example22} since this is a less constrained problem).

\end{enumerate} 

\subsection{Case Study 3\label{sec:ch2:example4}}

\input{../ch2/figures/suspension1}

A graph representing a quarter-car suspension was introduced in Fig.~\ref{fig:ch2:initialexamples1}; now we will seek graphs that have different topologies between the sprung ($\xcolor{S}$) and unsprung ($\xcolor{U}$) masses represented in Fig.~\ref{fig:ch2:suspension1}. These graphs could then be used with design studies that evaluate the performance of a particular suspension architecture (see Ref.~\cite{Allison2014b} for a design study on a particular architecture).
The components considered will be additional masses, springs, dampers, a force actuator, and parallel connections (these are schematically shown in Fig.~\ref{fig:ch2:suspension1}). The specific selection of $(C,R,P)$ was chosen to be near the limits of what is currently possible with the proposed enumeration methods in this article.

Some additional assumptions are also made on the component definitions. First, $\xcolor{B}$ is a parallel damper and spring to ensure that there is a stable equilibrium point for the damper. Next, both 3- and 4-port parallel components are included to facilitate more efficient generation of the useful architectures. A 4-port parallel connection is equivalent to two 3-port parallel connections but the 4-port component provides structure that can be utilized with some specific NSCs. With the problem outlined, the base three-tuple is specified as:
\begin{gather*}
{C} = \{ \xcolor{S}, \xcolor{U}, \xcolor{M}, \xcolor{K}, \xcolor{B}, \xcolor{F}, \xcolor{P}, \xcolor{P} \}, \quad R =  [1,1,2,2,2,1,2,2] \\
{P} = [1,1,1,2,2,2,3,4], \quad N_P = 28, \quad N_C = 13 \\
1.01 \times 10^{7} \leq \abs*{\mathcal{G}_3} \leq 2.13 \times 10^{14}
\end{gather*}

The NSCs for this case study are now listed with expanded details on reduced potential adjacency matrix $A_R$. A few of the constraints utilize insights from the physical modeling of the suspension architectures.

\begin{enumerate}[label=$\bullet$, widest=$\bullet$, nosep]

\item \ref{ch2:s1}, \ref{ch2:s3} and \ref{ch2:s4} with $M = [1, 1, 0, 0, 0, 0, 0, 0]$ enforcing that both the sprung and unsprung masses must be connected and all components not connected to these two are removed.

\item \ref{ch2:s7} with $P$ as the number of unique edges.

\item $A_R(2,1) = 0$ for \ref{ch2:s5} to avoid a direct connection between the sprung and unsprung masses as it would defeat the purpose of a suspension to isolate the masses. If this constraint was not added, $1/27$ of graphs generated from a pure \mypm{} approach would contain this connection.

\item $A_R(3,1) = A_R(3,2) = 0$ for \ref{ch2:s5} since a feasible graph cannot have either $\xcolor{S}$ or $\xcolor{U}$ be connected to $\xcolor{M}$ as there would not be a path between between $\xcolor{S}$ and $\xcolor{U}$. Therefore, no unique graphs are lost with this constraint. Rather, a more efficient enumeration results.

\item $A_R(8,8) = A_R(7,7) = A_R(8,7) = 0$ for \ref{ch2:s5} so no parallel components can be connected to each other. This greatly reduces the number of graphs generated by providing some specific structure on the number and type of parallel connections in the architectures.

\item $A_R(4,4) = A_R(5,5) = 0$ for \ref{ch2:s5} so no two $\xcolor{K}$ or $\xcolor{B}$ components can be connected in series since there are straightforward relationships to combine these series elements into a single equivalent component. By eliminating this type of connection when generating graphs, we have a substantially smaller number of graphs to evaluate.

\item No parallel connection path can exist between a connected $\xcolor{S}$ or $\xcolor{U}$ as these masses would not be isolated. This is slightly different than the NSCs in Sec.~\ref{sec:ch2:NSC} and is checked after \ref{ch2:s5}.

\item Cycles appear with single parallel components where the components in the cycle would not appear in the dynamic model based on the properties of a parallel connection (e.g.,~with the cycle \resizebox{!}{0.03\columnwidth}{
\begin{tikzpicture}[
mynode/.style={draw, circle, very thick, inner sep=0.1pt, scale=1.3},
myline/.style={draw, very thick},
]
\node[mynode,draw=none] (1) at (0,0) {$\xcolor{P}$};
\node[mynode,draw=none] (2) at (0.8,0.3) {$\xcolor{K}$};
\node[mynode,draw=none] (3) at (1.6,0)  {$\xcolor{B}$};
\draw [myline] (1) -- (2);
\draw [myline] (1) -- (3);
\draw [myline] (2) -- (3);
\end{tikzpicture}}
, neither $\xcolor{K}$ nor $\xcolor{B}$ would appear in the dynamic model). Graphs with these cycles are declared unuseful since an isomorphic graph with the parallel cycle removed would already appear in the set of graphs generated by the tree algorithm.

\item Many series connections between the 2-port components are interchangeable (e.g.,~$\xcolor{F}-\xcolor{K}$ and $\xcolor{K}-\xcolor{F}$ in series are physically equivalent). Therefore, these interchangeable series components are combined into a single equivalent component type (modifying the graph) and checked for isomorphisms. For the previously mentioned example, the equivalent component type would be $\xcolor{FK}$ based on alphabetical ordering of the original component labels.

\end{enumerate}

The complete $A_R$ is shown in Fig.~\ref{fig:ch2:suspension2_1} and its expansion to the potential adjacency matrix in Fig.~\ref{fig:ch2:suspension2_2} noting that both of these matrices are symmetric. Figure~\ref{fig:ch2:suspension2_2} has $1$s on the diagonal since self-connections should be allowed so the desired graph structure space is covered. For example, we might want to consider graphs where all components are present except a single $\xcolor{K}$ component and this only can occur if the detached $\xcolor{K}$ is connected to itself (and later removed).

\input{../ch2/figures/suspension2}

The results are presented in similar manner to the previous case studies: $4.7\times 10^{21}$ adjacency matrices\footnote{This represents the fairest comparison as the proper permutations of the ports representation of the potential adjacency matrix in Fig.~\ref{fig:ch2:suspension2_2} without the parallel components. There are $5.4 \times 10^8$ adjacency matrices with a component representation but this suffers from the unknown parallel connection issue discussed in Sec.~\ref{sec:ch2:candidates}. There are $3.0 \times 10^{23}$ adjacency matrices directly using the matrix in Fig.~\ref{fig:ch2:suspension2}b.} ($\mathcal{G}_0$); $2.1 \times 10^{14}$ \mypm{}s ($\mathcal{G}_1$); $1.6 \times 10^8$ candidate graphs generated through the basic tree search algorithm; $3.2 \times 10^7$ remaining candidate graphs after initial port-type isomorphism filter; $1.9 \times 10^6$ feasible graphs ($\mathcal{G}_2$); and 13,727 unique graphs ($\mathcal{G}_3$). $2\times 10^{9}$ graph comparisons were needed and $3 \times 10^7$ required a full isomorphism check.
Two unique architectures are shown in Fig.~\ref{fig:ch2:suspension3} with Fig.~\ref{fig:ch2:suspension3_1} being a common architecture \cite{Allison2014b}.

\input{../ch2/figures/suspension3}